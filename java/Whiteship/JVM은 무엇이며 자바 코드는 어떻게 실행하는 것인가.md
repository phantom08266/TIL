
## JVM(Java Virtual Machine)이란 무엇인가

#### 동작방식
자바 컴파일러가 Java Byte Code로 변환시킨 .class 파일을 해당 os에 맞는 기계어(Byte code)로 변환시켜주는 역할을 한다.
이래서 자바는 C언어보다는 JVM을 거쳐야 하므로 속도가 느리지만 이를 JIT로 일부 극복하였다.

#### 자바가 플랫폼 독립인 이유
JVM이 해당 os에 특화된 코드로 변환해주기 때문에 자바는 플랫폼에 독립적이고, JVM은 플랫폼에 종속적이다.



## 컴파일 하는 방법
JDK에 속해있는 javac파일을 이용하여 컴파일을 한다.
~~~
javac test.java
~~~
컴파일을 하게되면 자바 바이트코드인 test.class파일이 생성된다.






## 실행하는 방법
컴파일된 .class파일을 실행하며, 별도의 확장자를 붙이지 않고 파일이름만 사용한다.
~~~
java test
~~~

## 바이트코드란 무엇인가
자바에서의 바이트코드란 자바 가상머신이 실행하는 명령어의 형태를 말한다.
바이트코드 컴파일러가 소스코드(.java파일)를 중간언어인 바이트코드(.class)로 변환한 코드를 말한다. 


## JIT 컴파일러(Just-in-time compilation)란 무엇이며 어떻게 동작하는가
Just in time 즉 JVM이 바이트코드를 실행하는 시점에 바이트코드를 JIT컴파일을 통해 기계어로 변환하는 작업을 한다.
#### 동작방식
1. 실행 시점에서 인터프리트 방식으로 기계어 코드를 생성하면서 코드를 캐싱한다.
2. 같은 함수가 여러번 불릴 때 매번 기계어 코드를 생성하는 것을 방지한다.

## JVM 구성요소
JVM은 크게 4가지로 구분되어있다.
- Class Loader
- Execution Engine
- Runtime Data Area(Memory)
- Native

### Class Loader
자바 바이트코드로 변환된 .class파일을 Memory에 적재하는 역할.

### Execution Engine
Class Loader에 의해 Memory에 적재된 .class파일(바이트코드)들을 기계어로 변환하여 명령어 단위로 실행하는 역할.
만들어진 명령어를 하나씩 실행하는 **인터프리터 방식**, 바이트코드를 네이티브 코드로 변환하는 **JIT컴파일방식**이 있다.

###  Runtime Data Area(Memory)
- 메서드영역
	- 데이터 타입, 리턴타입, 상수, static변수,  클래스 멤버변수이름 등이 저장
	- 해당 메모리는 공유된다. 
- 힙 영역
	- 자바에서 new연산자로 생성된 객체와 배열이 저장.
	- 해당 메모리는 공유된다.
- 스택 영역
	- 스레드가 생성될때마다 생성되는 영역
	- 대표적으로 지역변수
-  PC Register
	- 스레드가 생성될때마다 생성되는 영역
	- 현재 실행되는 스레드의 주소와 명령을 저장하고 있는 영역
	- **메서드영역, 힙 영역은 모든 스레드가 공유**
- Native Method Stack
	- 자바언어 이외의 다른 언어로 작성된 코드를 저장하는 영역
	- 주로 native키워드가 붙은 애들



## JDK와 JRE의 차이

### JRE (Java Runtime Environment)
JRE에는 `자바 클래스 라이브러리`, `자바 클래스 로더`, `자바 가상머신`이 포함되어있다.

#### 동작방식
1. 컴파일된 자바코드를 자바 클래스 로더에게 전달한다.
2. 전달받은 자바코드를 메모리에 로드시킨 후 코어 자바 클래스 라이브러리들에게 연결시킨다.
3. JVM에 전달하여 실행한다.

#### 요약
JRE에는 자바 프로그램 실행에 필요한 라이브러리와 기타 소프트웨어가 포함되어있다. 
JRE는 단순히 실행만을 하기 위한 환경을 제공한다.
즉 해당 OS에서 컴파일된 파일이 존재하면 JRE설치만으로도 실행이 가능하다. 


### JDK (Java Development Kit)
간단하게 정리하면 `JRE + 개발에 필요한 도구모음`이라 할 수 있다.
대표적으로 JDK는 Java파일을 class파일로 컴파일해주는 컴파일러 Javac.exe가 속해있으며, 
실행 및 배포도구등을 포함한 전반적인 개발환경을 제공한다.

