# 인터넷 통신
인터넷에서 컴퓨터들끼리 어떤 방식으로 통신을 할까?
기본적으로 컴퓨터와 컴퓨터들 사이에는 인터넷이라는 거대한 망이 연결되어 있다.
이 망들은 무수히 많은 허브들과 서버들로 연결되어있기 때문에 목적지를 구분할 수 있는 무언가가 필요한다. 바로 `IP를` 이때 사용하는 것이다. 
해서 시작점인 IP와 도착점인 목적지 IP를 IP패킷정보에 실어서 전달하게 된다. 그러면 네트워크 망에 연결된 여러 노드들은 해당 IP 패킷 정보들을 확인 후 목적지에 해당하는 노드로 연결시켜 준다. 

> 목적지에서 응답은 요청했던 노드순서대로 오지 않고 다른 경로로도 올 수 있다.

하지만 IP로만 통신을 하기엔 큰 문제들이 있다.
1. 비연결성
   - 패킷을 받을 서버가 없거나 서버가 죽어있어도 시작점인 컴퓨터는 이를 알 방법이 없어 계속 전송한다.
2. 비신뢰성
   - 중간 노드들이 많아 패킷이 유실될 수 있다.
   - 전송할 패킷 사이즈가 커서 분할하여 전송 시 목적지 컴퓨터가 순서대로 수신하지 못할 가능성이 있다.
3. 프로그램 구분
   - 시작점인 컴퓨터에 여러 프로그램들이 요청한다면 어느 프로그램에다가 응답을 수신할 지 알 수가 없다.

이러한 문제점을 해결하기 위해 TCP, UDP 프로토콜이 존재한다.

# TCP, UDP

인터넷 프로토콜 스택의 4계층

![image](https://user-images.githubusercontent.com/39672033/144777869-f872a8d9-782d-43c9-8d7d-c0fde57155fd.png)


### 순서

1. 애플리케이션 계층에서는 socket라이브러리를 통해서 데이터를 전송계층에 전달
2. 전송계층에서는 TCP(port정보, 순서정보), UDP패킷 정보(port정보)들을 추가로 헤더에 작성한 다음 인터넷 계층으로 전달
3. 인터넷 계층에서는 시작점 ip, 도착점 ip 등의 추가 정보를 헤더에 작성한다.
4. 물리계층인 네트워크 인터페이스에서 LAN 카드를 통해서 패킷을 전송한다.
   ![image](https://user-images.githubusercontent.com/39672033/144777938-8db9cbcf-f2d4-4fa1-98b4-e72ae0b63298.png)


## TCP 특징

전송제어 프로토콜 (Transmission Control Protocol)

- 연결지향 (3 way handshake) : 그렇다고 시작점과 도착지점의 모든 노드들의 연결을 체크를 하는 것이 아님.
- 데이터 전달 보증
- 순서 보장
- 신뢰할 수 있는 프로토콜

## UDP 특징

사용자 데이터그램 프로토콜(User Datagram Protocol)

- 연결지향 X
- 데이터 전달 보증 X
- 순서 보장 X
- 그래서 속도가 빠름 
- 그럼 IP로만 통신하는 것과 뭐가 다른가? 
  - 비슷하지만 Port 정보를 추가하고 있어 여러 프로그램을 사용할때 구분할 수 있음.


# Port
port는 하나의 서버에서 여러 프로그램을 돌릴때 이를 구분지어 수신 송신하기위한 구분자라고 이해하면 된다.

![image](https://user-images.githubusercontent.com/39672033/144779173-9a59d698-20f5-415e-aae2-a75c8ffd6711.png)


포트는 0 ~ 65535까지 할당 가능하다.
0 ~ 1023은 잘 알려진 포트임으로 사용하지 않는다.


|Port|설명|
|-----|-----|
|20, 21|FTP|
|23|TELNET|
|80|HTTP|
|443|HTTPS|

<br><br><br>

# DNS
사용자가 모든 IP를 외우고 다닐 수 없으며, IP는 서버의 상황에따라 언제든지 바뀔 수 있다. 해서 외우기 쉽고 도메인명을 알면 해당 서버의 IP를 전달해주는 서버를 DNS 서버라고 한다.

애플리케이션에서는 네트워크 설정파일인 hosts부터 브라우저 캐시 등을 찾고, 없으면 해당 도메인 주소를 알고 있는 DNS 서버를 찾아서 ip를 달라고하는 방식으로 동작한다.

<br><br><br>

# URI

![image](https://user-images.githubusercontent.com/39672033/144820752-f1003620-d08b-4b8d-b029-b9ce4306235b.png)

URL(Resource Locator) : 리소스가 해당 위치에 있어요
URN(Resource Name) : 리소스 이름

URN이름만으로 실제 리소스를 찾을 수 있는 방법이 보편화 되지 않음. 
대부분 URL만 사용한다. 

URI
- **U**niform : 리소스 식별하는 통일된 방식
- **R**esource : 자원, URI로 식별할 수 있는 모든 것
- **I**dentifier : 다른 항목과 구분하는데 필요한 정보

![image](https://user-images.githubusercontent.com/39672033/144821162-73113f8c-cd50-4098-85c6-a832d0316039.png)

### URL

http는 80포트, https 는 443포트를 주로 사용한다. 디폴트포트를 사용하면 포트는 생략가능


### query
- key-value 형태
- ?로 시작, &로 추가 가능
- query parameter, query string으로 불린다. 
