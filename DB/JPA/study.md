# 1장 - JPA란

ORM - Object Relational Mapping

SQL을 직접 다룰 시 발생되는 문제점<br>
1. 진정한 의미의 계층분할이 어렵다.
   * SQL과 JDBC API를 데이터 접근 계층(DAO)로 숨기는데 성공했지만 논리적으로는 강하게 연결되어있다. 그래서 DAO메서드 뿐만 아니라 SQL도 같이 수정해야한다.
2. 엔티티를 신뢰할 수 없다. 
   * 엔티티들은 SQL에 의존함으로 Entity에 필드가 추가되어도 SQL이 바뀌지 않으면 값을 가져올 수 없다.
3. SQL에 의존적인 개발을 피하기 어렵다.
<br>
<br>

## 객체 vs 관계형 데이터베이스
RDBMS는 데이터 중심으로 구조화가 되어있다.
따라서 상속, 다형성, 추상과 같은 객체지향의 개념이 들어가 있지 않다.
즉 객체와 관계형 데이터베이스의 패러다임이 불일치 한다.

JPA에서는 같은 트랜젝션일 경우 조회된 객체는 동일성 비교로 비교 가능하다. <br>

### *Why?*
~~~~
JPA에서는 엔티티들을 메모리인 1차 캐시에 Map형태로 저장하고있다. 
여기서 key는 엔티티의 고유값(PK)를 말하며, value는 Entity인스턴스이다. 
그러므로 Entity Manager에서 반환하는 엔티티는 키 값으로 검색된 Entity인스턴스 임으로 
주소값이 같은 동일한 인스턴스일 수 밖에 없다. 
~~~~

<br>

> **동일성 비교** : 자바에서 ==비교를 말하며, 객체의 인스턴스의 주소값을 비교할 때 사용한다.<br>
> **동등성 비교** : 자바에서 equals 메서드를 사용하며, 인스턴스 주소값은 다를 수 있지만 객체 내부의 값을 비교할 때 사용한다.


